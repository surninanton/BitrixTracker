# 🗺 BitrixTracker - Roadmap

## 📋 Текущая Функциональность (v1.0)

- ✅ Синхронизация с Bitrix24 timeman API
- ✅ Отслеживание рабочего времени в menu bar
- ✅ Пауза/продолжение рабочего дня с синхронизацией в Б24
- ✅ Интеграция с ActivityWatch для статистики
- ✅ Отображение статистики по приложениям
- ✅ Автоматическая синхронизация при запуске
- ✅ Обработка закрытия дня (TIME_FINISH)
- ✅ macOS menu bar приложение

---

## 🎯 Планируемые Функции

### 🔥 Этап 1: Базовый Pomodoro (Высокий приоритет)

#### Функционал
- **Рабочие сессии**: 25 мин (настраивается)
- **Короткий перерыв**: 5 мин (настраивается)
- **Длинный перерыв**: 15-30 мин после N помодоро (настраивается)
- **Автоматическая синхронизация с Bitrix24**:
  - Начало перерыва → `timeman.pause` в Б24
  - Конец перерыва → продолжение работы в Б24

#### UI в Settings
```
┌─ Настройки Pomodoro ─────────────┐
│ ⏱ Рабочая сессия:    [25] мин   │
│ ☕ Короткий перерыв:  [5] мин    │
│ 🌴 Длинный перерыв:   [15] мин   │
│ 🔢 Помодоро до длинного: [4]     │
│ 🔔 Уведомления: [✓] включены    │
│ 🔄 Автопауза Б24: [✓] включена  │
└──────────────────────────────────┘
```

#### В меню
```
⏱ 00:00:00
├─ 🍅 Помодоро (вкл/выкл)
├─ ⏭ Пропустить помодоро
├─ Поставить на паузу
├─ Завершить рабочий день
├─ ...
```

#### Индикатор в menu bar
- Рабочая сессия: `🍅 23:45` (красный помидор)
- Короткий перерыв: `☕ 04:12`
- Длинный перерыв: `🌴 13:21`
- Счетчик: `🍅 2/4 23:45` (2-й помодоро из 4)

#### Задачи
- [ ] Добавить настройки помодоро в config.json
- [ ] Создать класс PomodoroTimer для управления таймером
- [ ] Реализовать переключение состояний: работа → перерыв → работа
- [ ] Интеграция с Б24: автопауза при начале перерыва
- [ ] Уведомления о начале/конце помодоро
- [ ] Звуковые сигналы (опционально)
- [ ] Счетчик помодоро (X/Y до длинного перерыва)
- [ ] Пропуск текущего помодоро
- [ ] Сохранение истории помодоро

---

### ⚡ Этап 2: Быстрые Действия (Средний приоритет)

#### Функционал
Предустановленные типы перерывов с автоматической паузой в Б24:

```
Быстрые действия →
├─ ☕ Кофе-брейк (5 мин)
├─ 🍽 Обед (30 мин)
├─ 🚶 Прогулка (15 мин)
└─ 🧘 Медитация (10 мин)
```

#### Задачи
- [ ] Настраиваемые быстрые действия
- [ ] Автоматическая пауза в Б24 при выборе действия
- [ ] Таймер обратного отсчета
- [ ] Уведомление по окончании
- [ ] Автовозобновление работы после завершения

---

### 📊 Этап 3: Расширенная Статистика (Средний приоритет)

#### Дневные цели и прогресс
```
┌─ Статистика ─────────────────────┐
│ 📊 Рабочее время: 6ч 2мин        │
│ 🎯 Цель на день:  8ч 0мин        │
│ 📈 Прогресс: ████████░░ 75%      │
│                                   │
│ 🍅 Помодоро: 12/16               │
│ ⏸ Перерывы: 1ч 23мин            │
└───────────────────────────────────┘
```

#### Функционал
- История по дням (7/30 дней)
- График времени
- Среднее время работы
- Самые продуктивные приложения за период
- Экспорт в CSV/JSON

#### Задачи
- [ ] База данных для хранения истории (SQLite)
- [ ] Расчет дневных/недельных статистик
- [ ] Визуализация прогресса цели
- [ ] История помодоро
- [ ] Графики продуктивности
- [ ] Экспорт данных

---

### 🔔 Этап 4: Улучшенные Уведомления (Средний приоритет)

#### Типы уведомлений
- Начало/конец помодоро (со звуком)
- Достижение цели дня
- Предупреждение о долгой работе без перерыва (>2 часов)
- Напоминание закрыть день (если открыт после 20:00)
- Статистика в конце дня

#### Настройки
```
┌─ Уведомления ────────────────────┐
│ [✓] Помодоро                     │
│ [✓] Перерывы                     │
│ [✓] Достижения                   │
│ [✓] Напоминания о перерывах      │
│ [✓] Конец рабочего дня           │
│ [✓] Звук уведомлений             │
└───────────────────────────────────┘
```

#### Задачи
- [ ] Система управления уведомлениями
- [ ] Настройки типов уведомлений
- [ ] Звуковые сигналы
- [ ] Умные напоминания о перерывах
- [ ] Дневная сводка

---

### 🎯 Этап 5: Цели и Планирование (Низкий приоритет)

#### Настройки целей
```
┌─ Настройки Целей ────────────────┐
│ ⏰ Рабочий день: [8] часов       │
│ 🍅 Помодоро цель: [16] шт        │
│ ⏰ Начало дня:  [09:00]          │
│ ⏰ Конец дня:   [18:00]          │
└───────────────────────────────────┘
```

#### Задачи
- [ ] Настройка дневных целей
- [ ] Трекинг выполнения целей
- [ ] Напоминания о приближении к концу дня
- [ ] Отклонения от графика

---

### 🎨 Этап 6: Настройки Вида (Низкий приоритет)

#### Функционал
```
┌─ Внешний вид ────────────────────┐
│ Иконка в menu bar:               │
│ ○ Таймер                         │
│ ○ Эмодзи + таймер                │
│ ○ Только эмодзи                  │
│                                   │
│ Формат времени:                  │
│ ○ ЧЧ:ММ:СС                       │
│ ○ ЧЧ:ММ                          │
└───────────────────────────────────┘
```

#### Задачи
- [ ] Выбор формата отображения
- [ ] Настройка иконки в menu bar
- [ ] Темная/светлая тема
- [ ] Кастомные цвета

---

### 🎮 Этап 7: Геймификация (Низкий приоритет)

#### Достижения
- 🏆 "Продуктивный день" - 8+ часов работы
- 🔥 "Серия!" - 5 дней подряд выполнил цель
- 🍅 "Мастер помодоро" - 100 помодоро
- ⚡ "Спринтер" - 10 помодоро подряд без пропусков

#### Прогресс
```
┌─ Достижения ─────────────────────┐
│ 🔥 Серия: 5 дней                 │
│ 🍅 Всего помодоро: 237           │
│ ⭐ Уровень: 12                   │
│                                   │
│ Следующая цель:                  │
│ 🏆 250 помодоро                  │
│ ████████░░ 94%                   │
└───────────────────────────────────┘
```

#### Задачи
- [ ] Система достижений
- [ ] Уровни и опыт
- [ ] Серии выполнения целей
- [ ] Мотивационные уведомления

---

## 🚀 Дополнительные Идеи (Будущее)

### Интеграции
- 📅 **Календарь** - автоопределение встреч и постановка на паузу
- 💬 **Slack/Telegram** - статус "На встрече" / "Работаю" / "На перерыве"
- 🎵 **Focus режим** - интеграция с Apple Music/Spotify

### Умные функции
- 🧠 **ML анализ** - определение самых продуктивных часов
- 📊 **Автокатегоризация** - определение типа работы по приложениям
- 🎯 **Умные предложения** - "Обычно в это время ты делаешь перерыв"

### Здоровье
- 👀 **Напоминания для глаз** - правило 20-20-20
- 🧘 **Растяжка** - напоминания встать и размяться
- 💧 **Вода** - напоминания пить воду

---

## 🏗 Технический Stack

### Текущий
- **Python 3.x**
- **rumps** - macOS menu bar
- **requests** - Bitrix24 API
- **aw-client** - ActivityWatch интеграция
- **py2app** - создание .app bundle

### Планируемый
- **SQLite** - хранение истории и статистики
- **matplotlib/plotly** - графики (опционально)
- **playsound** - звуковые уведомления
- **pync** - расширенные macOS уведомления

---

## 📝 Changelog

### v1.0.0 (2025-11-26)
- ✅ Базовая функциональность трекинга Bitrix24
- ✅ Интеграция с ActivityWatch
- ✅ Исправлен баг с resume после паузы
- ✅ Рефакторинг кода
- ✅ macOS .app bundle

---

## 🤝 Контрибьюция

Идеи, предложения и PR приветствуются!

**GitHub**: https://github.com/surninanton/BitrixTracker